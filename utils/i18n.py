# utils/i18n.py
"""Simple i18n layer for multi-language support."""
import streamlit as st

_STRINGS = {
    "en": {
        "app_name": "BioGuard AI",
        "dashboard_title": "Dashboard",
        "scan_title": "Scan",
        "vault_title": "Vault",
        "settings_title": "Settings",

        "unexpected_error": "An unexpected error occurred.",
        "error_apology": "We apologize for the inconvenience. You can try again or go back to home.",
        "contact_support": "Please contact support via email.",
        "retry": "Retry",
        "go_home": "Home",
        "report_issue": "Report issue",
        
        # Vault-specific keys
        "back_to_home": "Back to Home",
        "vault_subtitle": "Secure Medical Document Archive",
        "medical_categories": "Medical File Categories",
        "tests": "Lab Tests",
        "reports": "Medical Reports",
        "drag_files_here": "Drag files here",
        "file_types_hint": "PDF, JPG, PNG â€¢ X-Rays â€¢ Lab Tests â€¢ Prescriptions â€¢ Up to 10MB",
        "upload_medical": "Upload medical document",
        "choose_file_hint": "Choose a file to upload",
        "added_success": "Added to your medical file!",
        "upload_success": "Uploaded successfully",
        "file_exists": "already exists in the vault",
        "deleted_doc": "Document deleted",
        "your_documents": "Your Documents",

        "recent_scans": "Recent Scans",
        "analysis_complete": "Analysis Complete",
        "health_score": "Health Score",
        "nutrition_facts": "Nutrition Facts",
        "why_score": "Why this score?",
        "warnings": "Warnings",
        "recommendations": "Recommendations",
        "save_to_vault": "Save to Vault",
        "source": "Source",
        "confidence": "Confidence",
        "cached": "Cached",
        "total_scans": "Total Scans",
        "safe_items": "Safe Items",
        "medical_vault": "Medical Vault",
        "your_documents": "Your Medical Documents",
        "no_documents": "No documents yet. Start by uploading your first medical file! ðŸ“¤",
        "upload": "Upload",
        "upload_file": "Upload a file",
        "view_all": "View All",
        "category": "Category",
        "prescriptions": "Prescriptions",
        "lab_reports": "Lab Reports",
        "vaccinations": "Vaccinations",
        "xrays": "X-Rays & Scans",
        "other": "Other Documents",
        
        # Scan-specific keys
        "how_to_scan": "How to Scan",
        "step_detect": "Detect",
        "step_analyze": "Analyze",
        "step_results": "Results",
        "scan_instructions": "1) Allow camera access  â€¢  2) Point at product  â€¢  3) Wait for auto-scan or press capture",
        "camera_guide": "Point camera at the product to start scanning",
        "analyzing": "Analyzing...",
        "status_analyzing": "Analyzing...",
        "guide_tip": "Point camera at product label for best results",
        "helper_text": "Point camera at the product for instant analysis",
        "ingredients": "Ingredients",
        "capturing": "Capturing...",
        "analysis_error": "Analysis Error",
        "capture": "ðŸ“¸ Capture & Analyze",
        "upload_caption": "Upload product image for analysis",
        "analyze_button": "Analyze Image",
        "barcode_detected": "Barcode Detected",
        "product_detected": "Product detected!",
        "no_detection": "No products detected. Try again with clearer image.",
        "camera_not_ready": "Camera not ready yet. Please wait.",
        "manual_capture": "Manual Capture",
        "alternatives": "ðŸŒŸ Healthier Alternatives",
        "found_alternatives": "Found",
        "healthier_options": "healthier options",
        "alternatives_message": "No healthier alternatives found",
        "product_name": "Product Name",
        "brand": "Brand",
        "nutrition_grade": "Nutrition Grade",
        "scanned_image": "Scanned Image",
        
        # Login/Auth
        "login": "Login",
        "register": "Register",
        "email": "Email",
        "password": "Password",
        "password_confirm": "Confirm Password",
        "login_title": "Welcome to BioGuard AI",
        "login_subtitle": "Sign in to your account",
        "register_title": "Create an Account",
        "register_subtitle": "Join BioGuard AI",
        "login_button": "Sign In",
        "register_button": "Create Account",
        "already_have_account": "Already have an account?",
        "no_account": "Don't have an account?",
        "logout": "Logout",
        "invalid_email": "Invalid email format",
        "password_mismatch": "Passwords do not match",
        "user_exists": "Email already registered",
        "login_failed": "Invalid email or password",
        "logout_success": "Logged out successfully",
        "register_success": "Account created successfully!",
        
        # Admin
        "admin": "Admin",
        "admin_panel": "Admin Panel",
        "users_list": "Users List",
        "total_users": "Total Users",
        "user_email": "User Email",
        "user_joined": "Joined",
        "is_admin": "Admin",
    },
    "ar": {
        "app_name": "BioGuard AI",
        "dashboard_title": "Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…",
        "scan_title": "Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§",
        "vault_title": "Ø§Ù„Ù…Ø®Ø²Ù†",
        "settings_title": "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",

        "unexpected_error": "Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹.",
        "error_apology": "Ù†Ø¹ØªØ°Ø± Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø²Ø¹Ø§Ø¬. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø£Ùˆ Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©.",
        "contact_support": "ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ.",
        "retry": "Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©",
        "go_home": "Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
        "report_issue": "ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø´ÙƒÙ„Ø©",
        
        # Vault-specific keys
        "back_to_home": "Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
        "vault_subtitle": "Ø£Ø±Ø´ÙŠÙ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ© Ø§Ù„Ø¢Ù…Ù†",
        "medical_categories": "ÙØ¦Ø§Øª Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø·Ø¨ÙŠØ©",
        "tests": "Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„",
        "reports": "Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±",
        "drag_files_here": "Ø§Ø³Ø­Ø¨ Ø§Ù„Ù…Ù„ÙØ§Øª Ù‡Ù†Ø§",
        "file_types_hint": "PDF, JPG, PNG â€¢ Ø£Ø´Ø¹Ø© â€¢ ØªØ­Ø§Ù„ÙŠÙ„ â€¢ ÙˆØµÙØ§Øª â€¢ Ø­ØªÙ‰ 10MB",
        "upload_medical": "Ø±ÙØ¹ Ù…Ø³ØªÙ†Ø¯ Ø·Ø¨ÙŠ",
        "choose_file_hint": "Ø§Ø®ØªØ± Ù…Ù„Ù Ø·Ø¨ÙŠ Ù„Ù„Ø±ÙØ¹",
        "added_success": "ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ù…Ù„ÙÙƒ Ø§Ù„Ø·Ø¨ÙŠ!",
        "upload_success": "ØªÙ… Ø§Ù„Ø±ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­",
        "file_exists": "Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„ ÙÙŠ Ø§Ù„Ù…Ø®Ø²Ù†",
        "deleted_doc": "ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªÙ†Ø¯",
        "your_documents": "Ù…Ø³ØªÙ†Ø¯Ø§ØªÙƒ",

        "recent_scans": "Ø¢Ø®Ø± Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ÙØ­Øµ",
        "analysis_complete": "Ø§ÙƒØªÙ…Ù„ Ø§Ù„ØªØ­Ù„ÙŠÙ„",
        "health_score": "Ù…Ø¤Ø´Ø± Ø§Ù„ØµØ­Ø©",
        "nutrition_facts": "Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ©",
        "why_score": "Ù„Ù…Ø§Ø°Ø§ Ù‡Ø°Ù‡ Ø§Ù„Ù†ØªÙŠØ¬Ø©ØŸ",
        "warnings": "ØªØ­Ø°ÙŠØ±Ø§Øª",
        "recommendations": "ØªÙˆØµÙŠØ§Øª",
        "save_to_vault": "Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ù…Ø®Ø²Ù†",
        "source": "Ø§Ù„Ù…ØµØ¯Ø±",
        "confidence": "Ø§Ù„Ø«Ù‚Ø©",
        "cached": "Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø©",
        "total_scans": "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ­ÙˆØµØ§Øª",
        "safe_items": "Ø¹Ù†Ø§ØµØ± Ø¢Ù…Ù†Ø©",
        "medical_vault": "Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø·Ø¨ÙŠ",
        "your_documents": "Ù…Ø³ØªÙ†Ø¯Ø§ØªÙƒ Ø§Ù„Ø·Ø¨ÙŠØ©",
        "no_documents": "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†. Ø§Ø¨Ø¯Ø£ Ø¨Ø±ÙØ¹ Ø£ÙˆÙ„ Ù…Ù„Ù Ø·Ø¨ÙŠ! ðŸ“¤",
        "upload": "Ø±ÙØ¹",
        "upload_file": "Ø±ÙØ¹ Ù…Ù„Ù",
        "view_all": "Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„",
        "category": "Ø§Ù„ÙØ¦Ø©",
        "prescriptions": "Ø§Ù„Ø±ÙˆØ´ØªØ§Øª",
        "lab_reports": "Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„ Ø§Ù„Ø·Ø¨ÙŠØ©",
        "vaccinations": "Ø§Ù„ØªØ·Ø¹ÙŠÙ…Ø§Øª",
        "xrays": "Ø§Ù„Ø£Ø´Ø¹Ø©",
        "other": "Ø£Ø®Ø±Ù‰",
        
        # Scan-specific keys
        "how_to_scan": "ÙƒÙŠÙÙŠØ© Ø§Ù„Ù…Ø³Ø­",
        "step_detect": "ÙƒØ´Ù",
        "step_analyze": "ØªØ­Ù„ÙŠÙ„",
        "step_results": "Ù†ØªØ§Ø¦Ø¬",
        "scan_instructions": "1) Ø§Ø³Ù…Ø­ Ø¨Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ÙƒØ§Ù…ÙŠØ±Ø§  â€¢  2) ÙˆØ¬Ù‘Ù‡ Ù†Ø­Ùˆ Ø§Ù„Ù…Ù†ØªØ¬  â€¢  3) Ø§Ù†ØªØ¸Ø± Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø£Ùˆ Ø§Ø¶ØºØ· Ø²Ø± Ø§Ù„Ø§Ù„ØªÙ‚Ø§Ø·",
        "camera_guide": "ÙˆØ¬Ù‘Ù‡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù†Ø­Ùˆ Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ù…Ø³Ø­ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ",
        "analyzing": "Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù„ÙŠÙ„...",
        "status_analyzing": "Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù„ÙŠÙ„...",
        "guide_tip": "ÙˆØ¬Ù‘Ù‡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù†Ø­Ùˆ Ù…Ù„ØµÙ‚ Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£ÙØ¶Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬",
        "helper_text": "ÙˆØ¬Ù‘Ù‡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù†Ø­Ùˆ Ø§Ù„Ù…Ù†ØªØ¬ Ù„ÙŠØªÙ… Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ù…Ø¨Ø§Ø´Ø±Ø©",
        "ingredients": "Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª",
        "capturing": "Ø¬Ø§Ø±Ù Ø§Ù„Ø§Ù„ØªÙ‚Ø§Ø·...",
        "analysis_error": "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„",
        "capture": "ðŸ“¸ Ø§Ù„ØªÙ‚Ø§Ø· ÙˆØªØ­Ù„ÙŠÙ„",
        "upload_caption": "Ø§Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„ØªØ­Ù„ÙŠÙ„",
        "analyze_button": "ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©",
        "barcode_detected": "ØªÙ… ÙƒØ´Ù Ø§Ù„Ø±Ù…Ø²",
        "product_detected": "ØªÙ… ÙƒØ´Ù Ø§Ù„Ù…Ù†ØªØ¬!",
        "no_detection": "Ù„Ù… ÙŠØªÙ… ÙƒØ´Ù Ù…Ù†ØªØ¬Ø§Øª. Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§ Ø¨ØµÙˆØ±Ø© Ø£ÙˆØ¶Ø­.",
        "camera_not_ready": "Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ØºÙŠØ± Ø¬Ø§Ù‡Ø²Ø© Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±.",
        "manual_capture": "Ø§Ù„ØªÙ‚Ø§Ø· ÙŠØ¯ÙˆÙŠ",
        "alternatives": "ðŸŒŸ Ø¨Ø¯Ø§Ø¦Ù„ Ø£ÙƒØ«Ø± ØµØ­Ø©",
        "found_alternatives": "ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰",
        "healthier_options": "Ø®ÙŠØ§Ø±Ø§Øª Ø£ÙƒØ«Ø± ØµØ­Ø©",
        "alternatives_message": "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨Ø¯Ø§Ø¦Ù„ Ø£ÙƒØ«Ø± ØµØ­Ø©",
        "product_name": "Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬",
        "brand": "Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©",
        "nutrition_grade": "Ø¯Ø±Ø¬Ø© Ø§Ù„ØªØºØ°ÙŠØ©",
        "scanned_image": "Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ù…Ø³ÙˆØ­Ø©",
        
        # Login/Auth
        "login": "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",
        "register": "Ø§Ù„ØªØ³Ø¬ÙŠÙ„",
        "email": "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
        "password": "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",
        "password_confirm": "ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",
        "login_title": "Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ ÙÙŠ BioGuard AI",
        "login_subtitle": "Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ø­Ø³Ø§Ø¨Ùƒ",
        "register_title": "Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯",
        "register_subtitle": "Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ BioGuard AI",
        "login_button": "Ø¯Ø®ÙˆÙ„",
        "register_button": "Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨",
        "already_have_account": "Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ",
        "no_account": "Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ",
        "logout": "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬",
        "invalid_email": "ØµÙŠØºØ© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­Ø©",
        "password_mismatch": "ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©",
        "user_exists": "Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø³Ø¬Ù„ Ø¨Ø§Ù„ÙØ¹Ù„",
        "login_failed": "Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©",
        "logout_success": "ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­",
        "register_success": "ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­!",
        
        # Admin
        "admin": "Ù…Ø³Ø¤ÙˆÙ„",
        "admin_panel": "Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©",
        "users_list": "Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",
        "total_users": "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",
        "user_email": "Ø¨Ø±ÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",
        "user_joined": "Ø§Ù„ØªØ§Ø±ÙŠØ®",
        "is_admin": "Ù…Ø³Ø¤ÙˆÙ„",
    },
}


def get_lang() -> str:
    """Get current language, default to English."""
    if "lang" not in st.session_state:
        st.session_state.lang = "en"
    return st.session_state.lang


def set_lang(lang: str) -> None:
    """Set language to 'en' or 'ar'."""
    st.session_state.lang = "ar" if lang == "ar" else "en"


def t(key: str) -> str:
    """Translate key to current language."""
    lang = get_lang()
    return _STRINGS.get(lang, _STRINGS["en"]).get(key, _STRINGS["en"].get(key, key))
